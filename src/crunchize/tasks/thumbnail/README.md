# Thumbnail Task

The `thumbnail` task generates a single "poster frame" from an image sequence. It uses `oiiotool` to pick a specific frame based on relative sequence coordinates and resize it for high-speed review or gallery displays.

## Implicit Data Flow

The `thumbnail` task is designed to work seamlessly with sequence objects generated by a `pathmap` task using `reduce: true`.

1.  **Implicit Input**: If the preceding task returns a sequence object (containing a `files` list), the task automatically analyzes that list to pick the target frame.
2.  **Implicit Output**: If the input item contains a `base_path`, it is used as the default output path (appending the `.jpg` extension).
3.  **Automatic Scaling**: It uses high-quality lanczos resampling via `oiiotool` to ensure crisp thumbnails even from high-resolution source plates.

## Parameters

| Name | Type | Required | Default | Description |
| :--- | :--- | :--- | :--- | :--- |
| `output_path` | String | No* | - | Target thumbnail path. Inferred if not provided. |
| `sourcelocation` | Float | No | `0.5` | Relative position in the sequence to pick the frame (0.0 = Start, 0.5 = Mid, 1.0 = End). |
| `size` | Integer | No | - | Target width in pixels (height is calculated proportionally). |
| `format` | String | No | `jpg` | Output file format. |
| `existing` | String | No | `replace` | `skip` or `replace`. |

*\*Required only if the path cannot be inferred from the preceding task.*

## Example Usage

### Standard Poster Frame (Implicit)

This is the most common pattern. The `pathmap` task groups the frames, and `thumbnail` picks the middle frame to create a representative image.

```yaml
- name: "thumb_mapping"
  type: "pathmap"
  batch: true
  args:
    search: "PLATES"
    replace: "THUMBS"
    reduce: true

- name: "thumb_file"
  type: "thumbnail"
  args:
    sourcelocation: 0.5
    size: 480
```

### Picking the First Frame

Useful for creating "First Frame" slates or icons.

```yaml
- name: "first_frame_icon"
  type: "thumbnail"
  args:
    sourcelocation: 0.0
    size: 128
    format: "png"
```

## Internal Command

The task executes the following system command:
`oiiotool <picked_frame> --resize <size>x0 -o <output_path>`
